{"ast":null,"code":"import _inherits from \"/Users/mac/Apps/sr-manager/frontend/web/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/mac/Apps/sr-manager/frontend/web/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _toConsumableArray from \"/Users/mac/Apps/sr-manager/frontend/web/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/mac/Apps/sr-manager/frontend/web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mac/Apps/sr-manager/frontend/web/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _regeneratorRuntime from \"/Users/mac/Apps/sr-manager/frontend/web/node_modules/@babel/runtime/regenerator\";\nimport { isPlatformServer, DOCUMENT, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, Inject, EventEmitter, SecurityContext, Directive, ElementRef, PLATFORM_ID, Renderer2, NgZone, Input, Output, Component, ViewEncapsulation, forwardRef, NgModule } from '@angular/core';\nimport { __awaiter } from 'tslib';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/platform-browser';\nimport * as ɵngcc2 from '@angular/common';\nvar _c0 = [[[\"\", \"quill-editor-toolbar\", \"\"]]];\nvar _c1 = [\"[quill-editor-toolbar]\"];\nvar defaultModules = {\n  toolbar: [['bold', 'italic', 'underline', 'strike'], ['blockquote', 'code-block'], [{\n    header: 1\n  }, {\n    header: 2\n  }], [{\n    list: 'ordered'\n  }, {\n    list: 'bullet'\n  }], [{\n    script: 'sub'\n  }, {\n    script: 'super'\n  }], [{\n    indent: '-1'\n  }, {\n    indent: '+1'\n  }], [{\n    direction: 'rtl'\n  }], [{\n    size: ['small', false, 'large', 'huge']\n  }], [{\n    header: [1, 2, 3, 4, 5, 6, false]\n  }], [{\n    color: []\n  }, {\n    background: []\n  }], [{\n    font: []\n  }], [{\n    align: []\n  }], ['clean'], ['link', 'image', 'video'] // link and image, video\n  ]\n};\n\nvar getFormat = function getFormat(format, configFormat) {\n  var passedFormat = format || configFormat;\n  return passedFormat || 'html';\n};\n\nvar QUILL_CONFIG_TOKEN = new InjectionToken('config');\n\nvar QuillService = /*@__PURE__*/function () {\n  var QuillService = /*#__PURE__*/function () {\n    function QuillService(config) {\n      _classCallCheck(this, QuillService);\n\n      this.config = config;\n      this.count = 0;\n\n      if (!this.config) {\n        this.config = {\n          modules: defaultModules\n        };\n      }\n    }\n\n    _createClass(QuillService, [{\n      key: \"getQuill\",\n      value: function getQuill() {\n        var _this = this;\n\n        this.count++;\n\n        if (!this.Quill && this.count === 1) {\n          this.$importPromise = new Promise(function (resolve) {\n            return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              var _this2 = this;\n\n              var _a, _b, quillImport;\n\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return import('quill');\n\n                    case 2:\n                      quillImport = _context.sent;\n                      this.Quill = quillImport.default ? quillImport.default : quillImport; // Only register custom options and modules once\n\n                      (_a = this.config.customOptions) === null || _a === void 0 ? void 0 : _a.forEach(function (customOption) {\n                        var newCustomOption = _this2.Quill.import(customOption.import);\n\n                        newCustomOption.whitelist = customOption.whitelist;\n\n                        _this2.Quill.register(newCustomOption, true, _this2.config.suppressGlobalRegisterWarning);\n                      });\n                      (_b = this.config.customModules) === null || _b === void 0 ? void 0 : _b.forEach(function (_ref) {\n                        var implementation = _ref.implementation,\n                            path = _ref.path;\n\n                        _this2.Quill.register(path, implementation, _this2.config.suppressGlobalRegisterWarning);\n                      });\n                      resolve(this.Quill);\n\n                    case 7:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee, this);\n            }));\n          });\n        }\n\n        return this.$importPromise;\n      }\n    }]);\n\n    return QuillService;\n  }();\n\n  QuillService.ɵfac = function QuillService_Factory(t) {\n    return new (t || QuillService)(ɵngcc0.ɵɵinject(QUILL_CONFIG_TOKEN));\n  };\n\n  QuillService.ɵprov = i0.ɵɵdefineInjectable({\n    factory: function QuillService_Factory() {\n      return new QuillService(i0.ɵɵinject(QUILL_CONFIG_TOKEN));\n    },\n    token: QuillService,\n    providedIn: \"root\"\n  });\n  return QuillService;\n}();\n\nvar QuillEditorBase = /*@__PURE__*/function () {\n  var QuillEditorBase = /*#__PURE__*/function () {\n    function QuillEditorBase(elementRef, domSanitizer, doc, platformId, renderer, zone, service) {\n      var _this3 = this;\n\n      _classCallCheck(this, QuillEditorBase);\n\n      this.elementRef = elementRef;\n      this.domSanitizer = domSanitizer;\n      this.doc = doc;\n      this.platformId = platformId;\n      this.renderer = renderer;\n      this.zone = zone;\n      this.service = service;\n      this.required = false;\n      this.customToolbarPosition = 'top';\n      this.sanitize = false;\n      this.styles = null;\n      this.strict = true;\n      this.customOptions = [];\n      this.customModules = [];\n      this.preserveWhitespace = false;\n      this.trimOnValidation = false;\n      this.compareValues = false;\n      this.filterNull = false;\n      this.onEditorCreated = new EventEmitter();\n      this.onEditorChanged = new EventEmitter();\n      this.onContentChanged = new EventEmitter();\n      this.onSelectionChanged = new EventEmitter();\n      this.onFocus = new EventEmitter();\n      this.onBlur = new EventEmitter();\n      this.disabled = false; // used to store initial value before ViewInit\n\n      this.debounceTimers = [];\n\n      this.valueGetter = function (quillEditor, editorElement) {\n        var html = editorElement.querySelector('.ql-editor').innerHTML;\n\n        if (html === '<p><br></p>' || html === '<div><br></div>') {\n          html = null;\n        }\n\n        var modelValue = html;\n        var format = getFormat(_this3.format, _this3.service.config.format);\n\n        if (format === 'text') {\n          modelValue = quillEditor.getText();\n        } else if (format === 'object') {\n          modelValue = quillEditor.getContents();\n        } else if (format === 'json') {\n          try {\n            modelValue = JSON.stringify(quillEditor.getContents());\n          } catch (e) {\n            modelValue = quillEditor.getText();\n          }\n        }\n\n        return modelValue;\n      };\n\n      this.valueSetter = function (quillEditor, value) {\n        var format = getFormat(_this3.format, _this3.service.config.format);\n\n        if (format === 'html') {\n          if (_this3.sanitize) {\n            value = _this3.domSanitizer.sanitize(SecurityContext.HTML, value);\n          }\n\n          return quillEditor.clipboard.convert(value);\n        } else if (format === 'json') {\n          try {\n            return JSON.parse(value);\n          } catch (e) {\n            return [{\n              insert: value\n            }];\n          }\n        }\n\n        return value;\n      };\n\n      this.selectionChangeHandler = function (range, oldRange, source) {\n        var shouldTriggerOnModelTouched = !range && !!_this3.onModelTouched; // only emit changes when there's any listener\n\n        if (!_this3.onBlur.observers.length && !_this3.onFocus.observers.length && !_this3.onSelectionChanged.observers.length && !shouldTriggerOnModelTouched) {\n          return;\n        }\n\n        _this3.zone.run(function () {\n          if (range === null) {\n            _this3.onBlur.emit({\n              editor: _this3.quillEditor,\n              source: source\n            });\n          } else if (oldRange === null) {\n            _this3.onFocus.emit({\n              editor: _this3.quillEditor,\n              source: source\n            });\n          }\n\n          _this3.onSelectionChanged.emit({\n            editor: _this3.quillEditor,\n            oldRange: oldRange,\n            range: range,\n            source: source\n          });\n\n          if (shouldTriggerOnModelTouched) {\n            _this3.onModelTouched();\n          }\n        });\n      };\n\n      this.textChangeHandler = function (delta, oldDelta, source) {\n        // only emit changes emitted by user interactions\n        var text = _this3.quillEditor.getText();\n\n        var content = _this3.quillEditor.getContents();\n\n        var html = _this3.editorElem.querySelector('.ql-editor').innerHTML;\n\n        if (html === '<p><br></p>' || html === '<div><br></div>') {\n          html = null;\n        }\n\n        var trackChanges = _this3.trackChanges || _this3.service.config.trackChanges;\n        var shouldTriggerOnModelChange = (source === 'user' || trackChanges && trackChanges === 'all') && !!_this3.onModelChange; // only emit changes when there's any listener\n\n        if (!_this3.onContentChanged.observers.length && !shouldTriggerOnModelChange) {\n          return;\n        }\n\n        _this3.zone.run(function () {\n          if (shouldTriggerOnModelChange) {\n            _this3.onModelChange(_this3.valueGetter(_this3.quillEditor, _this3.editorElem));\n          }\n\n          _this3.onContentChanged.emit({\n            content: content,\n            delta: delta,\n            editor: _this3.quillEditor,\n            html: html,\n            oldDelta: oldDelta,\n            source: source,\n            text: text\n          });\n        });\n      }; // eslint-disable-next-line max-len\n\n\n      this.editorChangeHandler = function (event, current, old, source) {\n        // only emit changes when there's any listener\n        if (!_this3.onEditorChanged.observers.length) {\n          return;\n        } // only emit changes emitted by user interactions\n\n\n        if (event === 'text-change') {\n          var text = _this3.quillEditor.getText();\n\n          var content = _this3.quillEditor.getContents();\n\n          var html = _this3.editorElem.querySelector('.ql-editor').innerHTML;\n\n          if (html === '<p><br></p>' || html === '<div><br></div>') {\n            html = null;\n          }\n\n          _this3.zone.run(function () {\n            _this3.onEditorChanged.emit({\n              content: content,\n              delta: current,\n              editor: _this3.quillEditor,\n              event: event,\n              html: html,\n              oldDelta: old,\n              source: source,\n              text: text\n            });\n          });\n        } else {\n          _this3.onEditorChanged.emit({\n            editor: _this3.quillEditor,\n            event: event,\n            oldRange: old,\n            range: current,\n            source: source\n          });\n        }\n      };\n    }\n\n    _createClass(QuillEditorBase, [{\n      key: \"ngAfterViewInit\",\n      value: function ngAfterViewInit() {\n        return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n          var _this4 = this;\n\n          var Quill, toolbarElem, modules, placeholder, bounds, debug, readOnly, scrollingContainer, formats, format, newValue;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  if (!isPlatformServer(this.platformId)) {\n                    _context2.next = 2;\n                    break;\n                  }\n\n                  return _context2.abrupt(\"return\");\n\n                case 2:\n                  _context2.next = 4;\n                  return this.service.getQuill();\n\n                case 4:\n                  Quill = _context2.sent;\n                  this.elementRef.nativeElement.insertAdjacentHTML(this.customToolbarPosition === 'top' ? 'beforeend' : 'afterbegin', this.preserveWhitespace ? '<pre quill-editor-element></pre>' : '<div quill-editor-element></div>');\n                  this.editorElem = this.elementRef.nativeElement.querySelector('[quill-editor-element]');\n                  toolbarElem = this.elementRef.nativeElement.querySelector('[quill-editor-toolbar]');\n                  modules = Object.assign({}, this.modules || this.service.config.modules);\n\n                  if (toolbarElem) {\n                    modules.toolbar = toolbarElem;\n                  } else if (modules.toolbar === undefined) {\n                    modules.toolbar = defaultModules.toolbar;\n                  }\n\n                  placeholder = this.placeholder !== undefined ? this.placeholder : this.service.config.placeholder;\n\n                  if (placeholder === undefined) {\n                    placeholder = 'Insert text here ...';\n                  }\n\n                  if (this.styles) {\n                    Object.keys(this.styles).forEach(function (key) {\n                      _this4.renderer.setStyle(_this4.editorElem, key, _this4.styles[key]);\n                    });\n                  }\n\n                  if (this.classes) {\n                    this.addClasses(this.classes);\n                  }\n\n                  this.customOptions.forEach(function (customOption) {\n                    var newCustomOption = Quill.import(customOption.import);\n                    newCustomOption.whitelist = customOption.whitelist;\n                    Quill.register(newCustomOption, true);\n                  });\n                  this.customModules.forEach(function (_ref2) {\n                    var implementation = _ref2.implementation,\n                        path = _ref2.path;\n                    Quill.register(path, implementation);\n                  });\n                  bounds = this.bounds && this.bounds === 'self' ? this.editorElem : this.bounds;\n\n                  if (!bounds) {\n                    bounds = this.service.config.bounds ? this.service.config.bounds : this.doc.body;\n                  }\n\n                  debug = this.debug;\n\n                  if (!debug && debug !== false && this.service.config.debug) {\n                    debug = this.service.config.debug;\n                  }\n\n                  readOnly = this.readOnly;\n\n                  if (!readOnly && this.readOnly !== false) {\n                    readOnly = this.service.config.readOnly !== undefined ? this.service.config.readOnly : false;\n                  }\n\n                  scrollingContainer = this.scrollingContainer;\n\n                  if (!scrollingContainer && this.scrollingContainer !== null) {\n                    scrollingContainer = this.service.config.scrollingContainer === null || this.service.config.scrollingContainer ? this.service.config.scrollingContainer : null;\n                  }\n\n                  formats = this.formats;\n\n                  if (!formats && formats === undefined) {\n                    formats = this.service.config.formats ? _toConsumableArray(this.service.config.formats) : this.service.config.formats === null ? null : undefined;\n                  }\n\n                  this.zone.runOutsideAngular(function () {\n                    var _a, _b, _c;\n\n                    _this4.quillEditor = new Quill(_this4.editorElem, {\n                      bounds: bounds,\n                      debug: debug,\n                      formats: formats,\n                      modules: modules,\n                      placeholder: placeholder,\n                      readOnly: readOnly,\n                      scrollingContainer: scrollingContainer,\n                      strict: _this4.strict,\n                      theme: _this4.theme || (_this4.service.config.theme ? _this4.service.config.theme : 'snow')\n                    }); // Set optional link placeholder, Quill has no native API for it so using workaround\n\n                    if (_this4.linkPlaceholder) {\n                      var tooltip = (_b = (_a = _this4.quillEditor) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.tooltip;\n                      var input = (_c = tooltip === null || tooltip === void 0 ? void 0 : tooltip.root) === null || _c === void 0 ? void 0 : _c.querySelector('input[data-link]');\n\n                      if (input === null || input === void 0 ? void 0 : input.dataset) {\n                        input.dataset.link = _this4.linkPlaceholder;\n                      }\n                    }\n                  });\n\n                  if (this.content) {\n                    format = getFormat(this.format, this.service.config.format);\n\n                    if (format === 'text') {\n                      this.quillEditor.setText(this.content, 'silent');\n                    } else {\n                      newValue = this.valueSetter(this.quillEditor, this.content);\n                      this.quillEditor.setContents(newValue, 'silent');\n                    }\n\n                    this.quillEditor.getModule('history').clear();\n                  } // initialize disabled status based on this.disabled as default value\n\n\n                  this.setDisabledState(); // triggered if selection or text changed\n\n                  this.editorChangeHandlerRef = this.debounce(this.editorChangeHandler);\n                  this.quillEditor.on('editor-change', this.editorChangeHandlerRef); // mark model as touched if editor lost focus\n\n                  this.quillEditor.on('selection-change', this.selectionChangeHandler); // update model if text changes\n\n                  this.textChangeHandlerRef = this.debounce(this.textChangeHandler);\n                  this.quillEditor.on('text-change', this.textChangeHandlerRef); // trigger created in a timeout to avoid changed models after checked\n                  // if you are using the editor api in created output to change the editor content\n\n                  setTimeout(function () {\n                    if (_this4.onValidatorChanged) {\n                      _this4.onValidatorChanged();\n                    }\n\n                    _this4.onEditorCreated.emit(_this4.quillEditor);\n                  });\n\n                case 35:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n      }\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {\n        var _this5 = this;\n\n        if (this.quillEditor) {\n          this.quillEditor.off('selection-change', this.selectionChangeHandler);\n          this.quillEditor.off('text-change', this.textChangeHandlerRef);\n          this.quillEditor.off('editor-change', this.editorChangeHandlerRef);\n          this.debounceTimers.forEach(function (timer) {\n            return _this5.clearDebounceTimer(timer);\n          });\n        }\n      }\n    }, {\n      key: \"ngOnChanges\",\n      value: function ngOnChanges(changes) {\n        var _this6 = this;\n\n        if (!this.quillEditor) {\n          return;\n        }\n        /* eslint-disable @typescript-eslint/dot-notation */\n\n\n        if (changes.readOnly) {\n          this.quillEditor.enable(!changes.readOnly.currentValue);\n        }\n\n        if (changes.placeholder) {\n          this.quillEditor.root.dataset.placeholder = changes.placeholder.currentValue;\n        }\n\n        if (changes.styles) {\n          var currentStyling = changes.styles.currentValue;\n          var previousStyling = changes.styles.previousValue;\n\n          if (previousStyling) {\n            Object.keys(previousStyling).forEach(function (key) {\n              _this6.renderer.removeStyle(_this6.editorElem, key);\n            });\n          }\n\n          if (currentStyling) {\n            Object.keys(currentStyling).forEach(function (key) {\n              _this6.renderer.setStyle(_this6.editorElem, key, _this6.styles[key]);\n            });\n          }\n        }\n\n        if (changes.classes) {\n          var currentClasses = changes.classes.currentValue;\n          var previousClasses = changes.classes.previousValue;\n\n          if (previousClasses) {\n            this.removeClasses(previousClasses);\n          }\n\n          if (currentClasses) {\n            this.addClasses(currentClasses);\n          }\n        }\n        /* eslint-enable @typescript-eslint/dot-notation */\n\n      }\n    }, {\n      key: \"addClasses\",\n      value: function addClasses(classList) {\n        var _this7 = this;\n\n        QuillEditorBase.normalizeClassNames(classList).forEach(function (c) {\n          _this7.renderer.addClass(_this7.editorElem, c);\n        });\n      }\n    }, {\n      key: \"removeClasses\",\n      value: function removeClasses(classList) {\n        var _this8 = this;\n\n        QuillEditorBase.normalizeClassNames(classList).forEach(function (c) {\n          _this8.renderer.removeClass(_this8.editorElem, c);\n        });\n      }\n    }, {\n      key: \"writeValue\",\n      value: function writeValue(currentValue) {\n        // optional fix for https://github.com/angular/angular/issues/14988\n        if (this.filterNull && currentValue === null) {\n          return;\n        }\n\n        this.content = currentValue;\n\n        if (!this.quillEditor) {\n          return;\n        }\n\n        var format = getFormat(this.format, this.service.config.format);\n        var newValue = this.valueSetter(this.quillEditor, currentValue);\n\n        if (this.compareValues) {\n          var currentEditorValue = this.quillEditor.getContents();\n\n          if (JSON.stringify(currentEditorValue) === JSON.stringify(newValue)) {\n            return;\n          }\n        }\n\n        if (currentValue) {\n          if (format === 'text') {\n            this.quillEditor.setText(currentValue);\n          } else {\n            this.quillEditor.setContents(newValue);\n          }\n\n          return;\n        }\n\n        this.quillEditor.setText('');\n      }\n    }, {\n      key: \"setDisabledState\",\n      value: function setDisabledState() {\n        var isDisabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.disabled;\n        // store initial value to set appropriate disabled status after ViewInit\n        this.disabled = isDisabled;\n\n        if (this.quillEditor) {\n          if (isDisabled) {\n            this.quillEditor.disable();\n            this.renderer.setAttribute(this.elementRef.nativeElement, 'disabled', 'disabled');\n          } else {\n            if (!this.readOnly) {\n              this.quillEditor.enable();\n            }\n\n            this.renderer.removeAttribute(this.elementRef.nativeElement, 'disabled');\n          }\n        }\n      }\n    }, {\n      key: \"registerOnChange\",\n      value: function registerOnChange(fn) {\n        this.onModelChange = fn;\n      }\n    }, {\n      key: \"registerOnTouched\",\n      value: function registerOnTouched(fn) {\n        this.onModelTouched = fn;\n      }\n    }, {\n      key: \"registerOnValidatorChange\",\n      value: function registerOnValidatorChange(fn) {\n        this.onValidatorChanged = fn;\n      }\n    }, {\n      key: \"validate\",\n      value: function validate() {\n        if (!this.quillEditor) {\n          return null;\n        }\n\n        var err = {};\n        var valid = true;\n        var text = this.quillEditor.getText(); // trim text if wanted + handle special case that an empty editor contains a new line\n\n        var textLength = this.trimOnValidation ? text.trim().length : text.length === 1 && text.trim().length === 0 ? 0 : text.length - 1;\n\n        if (this.minLength && textLength && textLength < this.minLength) {\n          err.minLengthError = {\n            given: textLength,\n            minLength: this.minLength\n          };\n          valid = false;\n        }\n\n        if (this.maxLength && textLength > this.maxLength) {\n          err.maxLengthError = {\n            given: textLength,\n            maxLength: this.maxLength\n          };\n          valid = false;\n        }\n\n        if (this.required && !textLength) {\n          err.requiredError = {\n            empty: true\n          };\n          valid = false;\n        }\n\n        return valid ? null : err;\n      }\n    }, {\n      key: \"debounce\",\n      value: function debounce(callback) {\n        var _this9 = this;\n\n        var timer;\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          if (typeof _this9.debounceTime !== 'number') {\n            callback.apply(void 0, args);\n            return;\n          }\n\n          _this9.clearDebounceTimer(timer);\n\n          timer = _this9.doc.defaultView.setTimeout(function () {\n            _this9.clearDebounceTimer(timer);\n\n            callback.apply(void 0, args);\n          }, _this9.debounceTime);\n\n          _this9.debounceTimers.push(timer);\n        };\n      }\n    }, {\n      key: \"clearDebounceTimer\",\n      value: function clearDebounceTimer(timer) {\n        this.doc.defaultView.clearTimeout(timer);\n        this.debounceTimers = this.debounceTimers.filter(function (debounceTimer) {\n          return debounceTimer !== timer;\n        });\n      }\n    }], [{\n      key: \"normalizeClassNames\",\n      value: function normalizeClassNames(classes) {\n        var classList = classes.trim().split(' ');\n        return classList.reduce(function (prev, cur) {\n          var trimmed = cur.trim();\n\n          if (trimmed) {\n            prev.push(trimmed);\n          }\n\n          return prev;\n        }, []);\n      }\n    }]);\n\n    return QuillEditorBase;\n  }();\n\n  QuillEditorBase.ɵfac = function QuillEditorBase_Factory(t) {\n    return new (t || QuillEditorBase)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(QuillService));\n  };\n\n  QuillEditorBase.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: QuillEditorBase,\n    inputs: {\n      required: \"required\",\n      customToolbarPosition: \"customToolbarPosition\",\n      sanitize: \"sanitize\",\n      styles: \"styles\",\n      strict: \"strict\",\n      customOptions: \"customOptions\",\n      customModules: \"customModules\",\n      preserveWhitespace: \"preserveWhitespace\",\n      trimOnValidation: \"trimOnValidation\",\n      compareValues: \"compareValues\",\n      filterNull: \"filterNull\",\n      valueGetter: \"valueGetter\",\n      valueSetter: \"valueSetter\",\n      format: \"format\",\n      theme: \"theme\",\n      modules: \"modules\",\n      debug: \"debug\",\n      readOnly: \"readOnly\",\n      placeholder: \"placeholder\",\n      maxLength: \"maxLength\",\n      minLength: \"minLength\",\n      formats: \"formats\",\n      scrollingContainer: \"scrollingContainer\",\n      bounds: \"bounds\",\n      trackChanges: \"trackChanges\",\n      classes: \"classes\",\n      linkPlaceholder: \"linkPlaceholder\",\n      debounceTime: \"debounceTime\"\n    },\n    outputs: {\n      onEditorCreated: \"onEditorCreated\",\n      onEditorChanged: \"onEditorChanged\",\n      onContentChanged: \"onContentChanged\",\n      onSelectionChanged: \"onSelectionChanged\",\n      onFocus: \"onFocus\",\n      onBlur: \"onBlur\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n  return QuillEditorBase;\n}();\n\nvar QuillEditorComponent = /*@__PURE__*/function () {\n  var QuillEditorComponent = /*#__PURE__*/function (_QuillEditorBase) {\n    _inherits(QuillEditorComponent, _QuillEditorBase);\n\n    var _super = _createSuper(QuillEditorComponent);\n\n    function QuillEditorComponent(elementRef, domSanitizer, doc, platformId, renderer, zone, service) {\n      _classCallCheck(this, QuillEditorComponent);\n\n      return _super.call(this, elementRef, domSanitizer, doc, platformId, renderer, zone, service);\n    }\n\n    return QuillEditorComponent;\n  }(QuillEditorBase);\n\n  QuillEditorComponent.ɵfac = function QuillEditorComponent_Factory(t) {\n    return new (t || QuillEditorComponent)(ɵngcc0.ɵɵdirectiveInject(ElementRef), ɵngcc0.ɵɵdirectiveInject(DomSanitizer), ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(Renderer2), ɵngcc0.ɵɵdirectiveInject(NgZone), ɵngcc0.ɵɵdirectiveInject(QuillService));\n  };\n\n  QuillEditorComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: QuillEditorComponent,\n    selectors: [[\"quill-editor\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      multi: true,\n      provide: NG_VALUE_ACCESSOR,\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      useExisting: forwardRef(function () {\n        return QuillEditorComponent;\n      })\n    }, {\n      multi: true,\n      provide: NG_VALIDATORS,\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      useExisting: forwardRef(function () {\n        return QuillEditorComponent;\n      })\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n    ngContentSelectors: _c1,\n    decls: 1,\n    vars: 0,\n    template: function QuillEditorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c0);\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  return QuillEditorComponent;\n}();\n\nvar QuillViewHTMLComponent = /*@__PURE__*/function () {\n  var QuillViewHTMLComponent = /*#__PURE__*/function () {\n    function QuillViewHTMLComponent(sanitizer, service) {\n      _classCallCheck(this, QuillViewHTMLComponent);\n\n      this.sanitizer = sanitizer;\n      this.service = service;\n      this.content = '';\n      this.sanitize = false;\n      this.innerHTML = '';\n      this.themeClass = 'ql-snow';\n    }\n\n    _createClass(QuillViewHTMLComponent, [{\n      key: \"ngOnChanges\",\n      value: function ngOnChanges(changes) {\n        if (changes.theme) {\n          var theme = changes.theme.currentValue || (this.service.config.theme ? this.service.config.theme : 'snow');\n          this.themeClass = \"ql-\".concat(theme, \" ngx-quill-view-html\");\n        } else if (!this.theme) {\n          var _theme = this.service.config.theme ? this.service.config.theme : 'snow';\n\n          this.themeClass = \"ql-\".concat(_theme, \" ngx-quill-view-html\");\n        }\n\n        if (changes.content) {\n          var content = changes.content.currentValue;\n          this.innerHTML = this.sanitize ? content : this.sanitizer.bypassSecurityTrustHtml(content);\n        }\n      }\n    }]);\n\n    return QuillViewHTMLComponent;\n  }();\n\n  QuillViewHTMLComponent.ɵfac = function QuillViewHTMLComponent_Factory(t) {\n    return new (t || QuillViewHTMLComponent)(ɵngcc0.ɵɵdirectiveInject(DomSanitizer), ɵngcc0.ɵɵdirectiveInject(QuillService));\n  };\n\n  QuillViewHTMLComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: QuillViewHTMLComponent,\n    selectors: [[\"quill-view-html\"]],\n    inputs: {\n      content: \"content\",\n      sanitize: \"sanitize\",\n      theme: \"theme\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 2,\n    vars: 2,\n    consts: [[1, \"ql-container\", 3, \"ngClass\"], [1, \"ql-editor\", 3, \"innerHTML\"]],\n    template: function QuillViewHTMLComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelement(1, \"div\", 1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngClass\", ctx.themeClass);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"innerHTML\", ctx.innerHTML, ɵngcc0.ɵɵsanitizeHtml);\n      }\n    },\n    directives: [ɵngcc2.NgClass],\n    styles: [\"\\n.ql-container.ngx-quill-view-html {\\n  border: 0;\\n}\\n\"],\n    encapsulation: 2\n  });\n  return QuillViewHTMLComponent;\n}();\n\nvar QuillViewComponent = /*@__PURE__*/function () {\n  var QuillViewComponent = /*#__PURE__*/function () {\n    function QuillViewComponent(elementRef, renderer, zone, service, domSanitizer, platformId) {\n      var _this10 = this;\n\n      _classCallCheck(this, QuillViewComponent);\n\n      this.elementRef = elementRef;\n      this.renderer = renderer;\n      this.zone = zone;\n      this.service = service;\n      this.domSanitizer = domSanitizer;\n      this.platformId = platformId;\n      this.sanitize = false;\n      this.strict = true;\n      this.customModules = [];\n      this.customOptions = [];\n      this.preserveWhitespace = false;\n      this.onEditorCreated = new EventEmitter();\n\n      this.valueSetter = function (quillEditor, value) {\n        var format = getFormat(_this10.format, _this10.service.config.format);\n        var content = value;\n\n        if (format === 'text') {\n          quillEditor.setText(content);\n        } else {\n          if (format === 'html') {\n            if (_this10.sanitize) {\n              value = _this10.domSanitizer.sanitize(SecurityContext.HTML, value);\n            }\n\n            content = quillEditor.clipboard.convert(value);\n          } else if (format === 'json') {\n            try {\n              content = JSON.parse(value);\n            } catch (e) {\n              content = [{\n                insert: value\n              }];\n            }\n          }\n\n          quillEditor.setContents(content);\n        }\n      };\n    }\n\n    _createClass(QuillViewComponent, [{\n      key: \"ngOnChanges\",\n      value: function ngOnChanges(changes) {\n        if (!this.quillEditor) {\n          return;\n        }\n\n        if (changes.content) {\n          this.valueSetter(this.quillEditor, changes.content.currentValue);\n        }\n      }\n    }, {\n      key: \"ngAfterViewInit\",\n      value: function ngAfterViewInit() {\n        return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n          var _this11 = this;\n\n          var Quill, modules, debug, formats, theme;\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (!isPlatformServer(this.platformId)) {\n                    _context3.next = 2;\n                    break;\n                  }\n\n                  return _context3.abrupt(\"return\");\n\n                case 2:\n                  _context3.next = 4;\n                  return this.service.getQuill();\n\n                case 4:\n                  Quill = _context3.sent;\n                  modules = Object.assign({}, this.modules || this.service.config.modules);\n                  modules.toolbar = false;\n                  this.customOptions.forEach(function (customOption) {\n                    var newCustomOption = Quill.import(customOption.import);\n                    newCustomOption.whitelist = customOption.whitelist;\n                    Quill.register(newCustomOption, true);\n                  });\n                  this.customModules.forEach(function (_ref3) {\n                    var implementation = _ref3.implementation,\n                        path = _ref3.path;\n                    Quill.register(path, implementation);\n                  });\n                  debug = this.debug;\n\n                  if (!debug && debug !== false && this.service.config.debug) {\n                    debug = this.service.config.debug;\n                  }\n\n                  formats = this.formats;\n\n                  if (!formats && formats === undefined) {\n                    formats = this.service.config.formats ? Object.assign({}, this.service.config.formats) : this.service.config.formats === null ? null : undefined;\n                  }\n\n                  theme = this.theme || (this.service.config.theme ? this.service.config.theme : 'snow');\n                  this.elementRef.nativeElement.insertAdjacentHTML('afterbegin', this.preserveWhitespace ? '<pre quill-view-element></pre>' : '<div quill-view-element></div>');\n                  this.editorElem = this.elementRef.nativeElement.querySelector('[quill-view-element]');\n                  this.zone.runOutsideAngular(function () {\n                    _this11.quillEditor = new Quill(_this11.editorElem, {\n                      debug: debug,\n                      formats: formats,\n                      modules: modules,\n                      readOnly: true,\n                      strict: _this11.strict,\n                      theme: theme\n                    });\n                  });\n                  this.renderer.addClass(this.editorElem, 'ngx-quill-view');\n\n                  if (this.content) {\n                    this.valueSetter(this.quillEditor, this.content);\n                  } // trigger created in a timeout to avoid changed models after checked\n\n\n                  setTimeout(function () {\n                    _this11.onEditorCreated.emit(_this11.quillEditor);\n                  });\n\n                case 20:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n      }\n    }]);\n\n    return QuillViewComponent;\n  }();\n\n  QuillViewComponent.ɵfac = function QuillViewComponent_Factory(t) {\n    return new (t || QuillViewComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(QuillService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID));\n  };\n\n  QuillViewComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: QuillViewComponent,\n    selectors: [[\"quill-view\"]],\n    inputs: {\n      sanitize: \"sanitize\",\n      strict: \"strict\",\n      customModules: \"customModules\",\n      customOptions: \"customOptions\",\n      preserveWhitespace: \"preserveWhitespace\",\n      format: \"format\",\n      theme: \"theme\",\n      modules: \"modules\",\n      debug: \"debug\",\n      formats: \"formats\",\n      content: \"content\"\n    },\n    outputs: {\n      onEditorCreated: \"onEditorCreated\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 0,\n    vars: 0,\n    template: function QuillViewComponent_Template(rf, ctx) {},\n    styles: [\"\\n.ql-container.ngx-quill-view {\\n  border: 0;\\n}\\n\"],\n    encapsulation: 2\n  });\n  return QuillViewComponent;\n}();\n\nvar QuillModule = /*@__PURE__*/function () {\n  var QuillModule = /*#__PURE__*/function () {\n    function QuillModule() {\n      _classCallCheck(this, QuillModule);\n    }\n\n    _createClass(QuillModule, null, [{\n      key: \"forRoot\",\n      value: function forRoot(config) {\n        return {\n          ngModule: QuillModule,\n          providers: [{\n            provide: QUILL_CONFIG_TOKEN,\n            useValue: config\n          }]\n        };\n      }\n    }]);\n\n    return QuillModule;\n  }();\n\n  QuillModule.ɵfac = function QuillModule_Factory(t) {\n    return new (t || QuillModule)();\n  };\n\n  QuillModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: QuillModule\n  });\n  QuillModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [QuillService],\n    imports: [[CommonModule]]\n  });\n  return QuillModule;\n}();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(QuillModule, {\n    declarations: function declarations() {\n      return [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent];\n    },\n    imports: function imports() {\n      return [CommonModule];\n    },\n    exports: function exports() {\n      return [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent];\n    }\n  });\n})();\n/*\n * Public API Surface of ngx-quill\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { QUILL_CONFIG_TOKEN, QuillEditorBase, QuillEditorComponent, QuillModule, QuillService, QuillViewComponent, QuillViewHTMLComponent, defaultModules }; //# sourceMappingURL=ngx-quill.js.map","map":null,"metadata":{},"sourceType":"module"}